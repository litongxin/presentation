<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Javascript Test Frameworks And Libraries</title>

    <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
    <meta name="author" content="Hakim El Hattab">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/thoughtworks.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
        <section>
            <h1>Javascript Test Frameworks And Libraries</h1>
            <h3>Glance Through and Comparison</h3>
            <p>
                <small>Created by <a target=_blank href="https://github.com/litongxin">Li Tongxin</a></small>
            </p>
        </section>

        <section>
            <h2>Summary</h2>
            <ol>
                <li>Let's Classify</li>
                <li>Test Runner - Karma</li>
                <li>Live Demo</li>
                <li>Jasmine vs Mocha</li>
            </ol>
        </section>
        <section>
            <section>
                <h2>Any test frameworks/libs you know?</h2>
                <p><span class="fragment">Mocha...</span> <span class="fragment"> ...enzyme...</span></p>
                <p><span class="fragment">...jasmine</span> <span class="fragment">...karma...</span> <span
                        class="fragment">Qunit...</span></p>
                <p><span class="fragment">jest...</span> <span class="fragment">...sinon...</span></p>
                <p><span class="fragment">...chai</span> <span class="fragment">...Tap...</span> <span class="fragment">expect.js...</span>
                </p>
                <p><span class="fragment">...should.js...</span></p>
                <p><span class="fragment">......</span></p>
            </section>
            <section>
                <h2>How to write better test case in BDD style?</h2>
                <ul>
                    <li class="fragment roll-in">Describe the feature that youâ€™re testing in plain English.</li>
                    <li class="fragment roll-in">Provide the expected outcome of the test. This part is why many unit
                        tests are called expectations.
                    </li>
                    <li class="fragment roll-in">Compare that to the actual value.</li>
                </ul>
            </section>
            <section>
                <h2>Let's classify</h2>
                <p style="text-align: left">
                    <span class="fragment highlight-current-blue">Test framework:</span> mocha, jasmine, Qunit, Tap,
                    Jest
                </p>
                <p style="text-align: left">
                    <span class="fragment highlight-current-blue">Test runner:</span> Karma, Chutzpah, Protractor
                </p>
                <p style="text-align: left">
                    <span class="fragment highlight-current-blue">Test assertion library:</span> should.js, chai,
                    expect.js
                </p>
                <p style="text-align: left">
                    <span class="fragment highlight-current-blue"> Test mocking library:</span> sinon
                </p>
                <p style="text-align: left">
                    <span class="fragment highlight-current-blue">Testing utilities for React:</span> enzyme
                </p>
            </section>
        </section>

        <section>
            <section>
                <h2>Karma</h2>
                <p>Karma is a browser test runner.</p>
                <p>
                    <small>The idea is that browsers do not have natively a concept of loading tests files, running
                        them, and reporting results.
                    </small>
                </p>
            </section>
            <section>
                <h3>What karma does is (roughly) - Part 1</h3>
                <ul style="font-size: 28px">
                    <li>
                        <p>starting a small web server to serve "client-side" javascript files to be tested</p>
                        <small>Those files will be your actual js files; you will tell karma how to load them. If you
                            use requirejs, there is a karma plugin, and some config is needed.
                        </small>
                    </li>
                    <li>
                        <p>also serve the "client-side" javascript files with the tests</p>
                        <small>Those tests can be written in a variety of Javascript testing framework (Jasmine, QUnit,
                            Mocha); this is JS code that is run in the browser.
                        </small>
                    </li>
                    <li>
                        <p>serve a custom web page that will run javascript code for the tests</p>
                        <small>The custom web page will be a bit different for each testing framework ; this is why
                            karma has plugins for different frameworks.
                        </small>
                    </li>
                </ul>
            </section>
            <section>
                <h3>What karma does is (roughly) - Part 2</h3>
                <ul style="font-size: 28px">
                    <li>
                        <p>start a browser to load this page</p>
                        <small>Karma can launch the page in many browsers (FF, Chrome, or headless browsers like
                            PhantomJs.)
                        </small>
                    </li>
                    <li>
                        <p>report the results of the test to the server</p>
                        <small>Reporting to karma is, again, framework-dependant, and dealt with karma plugins.</small>
                    </li>
                    <li>
                        <p>karma can then again report the results to text files, the console, anything your CI server
                            likes, etc...</p>
                    </li>
                </ul>
            </section>
        </section>

        <section>
            <h2>Live Demo</h2>
            <a href="https://github.com/litongxin/head-first-javascript-test" target="_blank">Github:
                litongxin/head-first-javascript-test</a>
        </section>

        <section>
            <h2>Jasmine vs Mocha</h2>
            <table>
                <thead>
                <tr>
                    <th></th>
                    <th>Pros</th>
                    <th>Cons</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>Jasmine</td>
                    <td>
                        <ul style="font-size: 25px;">
                            <li>Write in BDD style</li>
                            <li>Jasmine has it own assertion and mocking ability.</li>
                        </ul>
                    </td>
                    <td style="font-size: 25px;">
                        <ul>
                            <li>Need test runner.</li>
                            <li>Less release</li>
                        </ul>
                    </td>
                <tr>
                <tr>
                    <td>Mocha</td>
                    <td>
                        <ul style="font-size: 25px;">
                            <li>Write in BDD style</li>
                            <li>Test runner baked in.</li>
                            <li>More frequent updates.</li>
                            <li>More downloads and more forks on Github.</li>
                        </ul>
                    </td>
                    <td style="font-size: 25px;">
                        <ul>
                            <li>Need assertion lib (chai)</li>
                            <li>Need mocking lib (sinon)</li>
                        </ul>
                    </td>
                <tr>
                </tbody>
            </table>
            <a href="https://npmcompare.com/compare/jasmine,mocha" target="_blank"
               style="font-size: 20px; color:#1b91ff;">Magic site: npmcompare</a>
        </section>

        <section>
            <h2>Assertions</h2>
            <p>Jasmine: </p>
            <pre>
							<code data-trim>
expect(calculator.multiply(3, 4)).toEqual(12);
							</code>
                </pre>
            <p>Chai</p>
            <pre>
                    <code data-trim>
expect(calculator.multiply(3, 4)).to.equal(12);
                    </code>
                </pre>
        </section>

        <section>
            <section>
                <h2>Test Doubles</h2>
                <h4>spies/mocks and stubs</h4>
            </section>

            <section>
                <h3>Spies/mocks</h3>
                <p>A spy is a function that replaces a function from your code
                    where you want to control its behavior in a test.
                </p>
                <p>spy on existing methods using Jasmine</p>
                <pre>
                    <code data-trim>
                        var userSaveSpy = spyOn(blogpost, 'publish');
                    </code>
                </pre>
            </section>

            <section>
                <p>A spy in Jasmine will <span class="fragment highlight-blue">not call though</span>
                    on the method being spied, where in Sinon this is default behavior.
                </p>
                <p>Jasmine: </p>
                <pre>
							<code data-trim>
spyOn(blogpost, 'publish').andCallTrough();
							</code>
                </pre>
                <p>Sinon</p>
                <pre>
                    <code data-trim>
sinon.spy(blogpost, 'publish');
                    </code>
                </pre>
            </section>

            <section>
                <h3>Stubs</h3>
                <p>A stub acts as a controllable replacement.</p>
            </section>

            <section>
                <p>Stubs are <span class="fragment highlight-blue">similar to</span> the default behavior of Jasmine
                    spies where the original method is not called.</p>
                <p>Jasmine: </p>
                <pre>
							<code data-trim>
spyOn(blogpost, 'publish').andReturns(200);
							</code>
                </pre>
                <p>Sinon</p>
                <pre>
                    <code data-trim>
sinon.stub(blogpost, 'publish').returns(200);
                    </code>
                </pre>
            </section>
        </section>

        <section>
            <section>
                <h2>Asynchronous tests</h2>
                <p>Promise and callbacks</p>
            </section>
            <section>
                <p>Promise</p>
                <small>A Promise has three states: pending, resovled and rejected</small>
                <pre>
						<code data-trim style="max-height:590px">
it('should resolve with the User object', function(done) {
  var deffered = new $.Deferred();
  var promise = deffered.promise();
  var stub = sinon.stub(BlogPost.prototype, 'fetch').returns(promise);

  deffered.resolve({ name: 'A post' });

  BlogPost.getById(1).then(function(user) {
    expect(post instanceof Blogpost).toBe(true);
  }).finally(done);
});
                        </code>
                </pre>
            </section>
            <section>
                <p>More example:</p>
                <pre>
						<code data-trim style="max-height:590px">
describe('When loading a blog post from database', function () {
     it('should return an instance of Blogpost', function (done) {
          BlogPost.getById(1).then(function (post) {
               expect(post instanceof Blogpost).toBe(true);
          }).finally(done);
     });
     it('should return the user with id 1', function (done) {
          BlogPost.getById(1).then(function (post) {
                expect(post.id).toEqual(1);
          }).finally(done);
     });
     it('should fail with 401 for non-existing posts', function (done) {
          BlogPost.getById(2).catch(function (err) {
               expect(err.status).toEqual(401);
          }).finally(done);
     });
});
						</code>
					</pre>
            </section>
            <section>
                <p>Callback</p>
                <pre>
							<code data-trim style="max-height:590px">
describe('When loading a blog post from database', function () {
     it('should return an instance of Blogpost', function (done) {
          BlogPost.getById(1, function (err, post) {
               expect(post instanceof Blogpost).toBe(true);
               done();
          })
     ;});
     it('should return the user with id 1', function (done) {
          BlogPost.getById(1, function (err, post) {
               expect(post.id).toEqual(1);
               done();
          });
     });
     it('should fail with a 401 for non-existing posts', function (done) {
          BlogPost.getById(2).catch(function (err, post) {
               expect(err.status).toEqual(401);
               done();
          });
     });
});
							</code>
						</pre>
            </section>
        </section>
    </div>

</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>
    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'slide', // none/fade/slide/convex/concave/zoom
        // Optional reveal.js plugins
        dependencies: [
            {
                src: 'lib/js/classList.js', condition: function () {
                return !document.body.classList;
            }
            },
            {
                src: 'plugin/markdown/marked.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'plugin/markdown/markdown.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'plugin/highlight/highlight.js', async: true, condition: function () {
                return !!document.querySelector('pre code');
            }, callback: function () {
                hljs.initHighlightingOnLoad();
            }
            },
            {src: 'plugin/zoom-js/zoom.js', async: true},
            {src: 'plugin/notes/notes.js', async: true}
        ]
    });
</script>

</body>
</html>
